@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  font-family: Inter, system-ui, Avenir, Helvetica, Arial, sans-serif;
  line-height: 1.5;
  font-weight: 400;
  color-scheme: light dark;
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  
  /* Safe area insets for notched devices */
  --sat: env(safe-area-inset-top);
  --sar: env(safe-area-inset-right);
  --sab: env(safe-area-inset-bottom);
  --sal: env(safe-area-inset-left);
}

html {
  height: -webkit-fill-available; /* Fix for iOS height issues */
}

body {
  margin: 0;
  min-width: 320px;
  min-height: 100vh;
  min-height: -webkit-fill-available; /* Fix for iOS height issues */
  @apply bg-gradient-to-br from-primary-600 to-secondary-400;
  
  /* Prevent overscroll bounce effect on iOS */
  overscroll-behavior: none;
  
  /* Prevent text size adjustment on orientation change */
  -webkit-text-size-adjust: 100%;
  
  /* Improve touch interactions */
  touch-action: manipulation;
}

/* Disable pull-to-refresh on mobile */
html, body {
  overscroll-behavior-y: contain;
}

/* Glassmorphic Design System */
@layer components {
  /* Core Glassmorphic Card Component */
  .glass-card {
    @apply backdrop-blur-xl bg-white/10 rounded-glass-card border border-white/20 
           shadow-glass transition-all duration-300 p-6 mobile:p-4;
  }
  
  .glass-card-outlined {
    @apply backdrop-blur-xl bg-white/5 rounded-glass-card border border-white/30 
           transition-all duration-300 p-6 mobile:p-4;
  }
  
  .glass-card-flat {
    @apply backdrop-blur-xl bg-white/10 rounded-glass-card 
           transition-all duration-300 p-6 mobile:p-4;
  }
  
  .glass-card-hover {
    @apply hover:shadow-glass-hover hover:bg-white/15 transition-all duration-300;
  }
  
  .glass-card-active {
    @apply active:shadow-glass-active active:bg-white/20 transition-all duration-150;
  }
  
  /* Glassmorphic Button Component */
  .glass-button {
    @apply backdrop-blur-xl bg-blue-gradient rounded-glass-button 
           min-h-[44px] min-w-[44px] text-white font-medium px-4 py-2
           hover:shadow-glass-hover hover:brightness-110 
           active:shadow-glass-active active:brightness-90
           focus:outline-none focus:ring-2 focus:ring-primary-300 focus:ring-opacity-50
           disabled:opacity-50 disabled:cursor-not-allowed
           transition-all duration-300
           touch-action-manipulation tap-highlight-transparent;
  }
  
  .glass-button-secondary {
    @apply glass-button bg-glass-gradient text-primary-600 border border-white/30;
  }
  
  .glass-button-outline {
    @apply glass-button bg-transparent border border-white/50 hover:bg-white/10;
  }
  
  .glass-button-text {
    @apply glass-button bg-transparent border-0 shadow-none hover:bg-white/10;
  }
  
  /* Glassmorphic Input Component */
  .glass-input {
    @apply backdrop-blur-xl bg-white/10 rounded-glass-button border border-white/20 
           px-4 py-2 text-white placeholder:text-white/50 min-h-[44px] w-full
           focus:outline-none focus:ring-2 focus:ring-primary-300 focus:border-primary-300
           disabled:opacity-50 disabled:cursor-not-allowed
           transition-all duration-300
           touch-action-manipulation tap-highlight-transparent;
  }
  
  /* Glassmorphic Navigation Component */
  .glass-nav {
    @apply backdrop-blur-xl bg-white/10 border-b border-white/20 
           sticky top-0 z-50 px-4 py-3 shadow-glass;
  }
  
  .glass-nav-item {
    @apply px-4 py-2 rounded-glass-button text-white/80 hover:text-white 
           hover:bg-white/10 transition-all duration-300
           min-h-[44px] min-w-[44px] flex items-center justify-center
           touch-action-manipulation tap-highlight-transparent;
  }
  
  .glass-nav-item-active {
    @apply bg-white/15 text-white;
  }
  
  /* Glassmorphic Modal Component */
  .glass-modal {
    @apply fixed inset-0 z-50 flex items-center justify-center p-4 mobile:p-2;
  }
  
  .glass-modal-backdrop {
    @apply absolute inset-0 bg-black/40 backdrop-blur-sm;
  }
  
  .glass-modal-content {
    @apply glass-card max-w-lg w-full max-h-[90vh] overflow-auto z-10
           mobile:max-h-[95vh] mobile:rounded-t-glass-card mobile:rounded-b-none mobile:mt-auto;
  }
  
  /* Responsive Containers */
  .container-responsive {
    @apply w-full px-4 mx-auto
           sm:max-w-[540px] 
           md:max-w-[720px] 
           lg:max-w-[960px] 
           xl:max-w-[1140px] 
           2xl:max-w-[1320px];
  }
  
  /* Glassmorphic Utility Classes */
  .glass-divider {
    @apply h-px bg-white/20 my-4;
  }
  
  .glass-scrollbar {
    @apply scrollbar-thin scrollbar-thumb-white/20 scrollbar-track-transparent;
  }
  
  /* Loading Spinner */
  .loading-spinner {
    @apply inline-block rounded-full border-2 border-t-blue-400 border-blue-200/30 animate-spin;
  }
  
  .loading-sm {
    @apply w-4 h-4;
  }
  
  .loading-md {
    @apply w-6 h-6;
  }
  
  .loading-lg {
    @apply w-8 h-8;
  }
  
  .loading-xl {
    @apply w-12 h-12;
  }
  
  /* Mobile-specific styles */
  .mobile-safe-bottom {
    @apply pb-[var(--sab)];
  }
  
  .mobile-safe-top {
    @apply pt-[var(--sat)];
  }
  
  /* Mobile-friendly form elements */
  .mobile-select {
    @apply appearance-none bg-white/10 rounded-glass-button border border-white/20 
           px-4 py-2 text-white min-h-[44px] w-full
           bg-no-repeat bg-[right_0.5rem_center]
           focus:outline-none focus:ring-2 focus:ring-primary-300 focus:border-primary-300;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-size: 1.5em 1.5em;
  }
  
  /* Accessibility Utilities */
  .min-touch-target {
    @apply min-h-[44px] min-w-[44px]; /* Ensures minimum touch target size for accessibility */
  }
  
  /* Mobile-friendly spacing */
  .mobile-stack > * + * {
    @apply mt-4 mobile:mt-3;
  }
  
  .mobile-stack-lg > * + * {
    @apply mt-6 mobile:mt-4;
  }
  
  /* Mobile-friendly grid */
  .mobile-grid {
    @apply grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mobile:gap-3;
  }
  
  /* Mobile bottom sheet */
  .mobile-bottom-sheet {
    @apply fixed bottom-0 left-0 right-0 z-50 
           bg-white/10 backdrop-blur-xl 
           rounded-t-glass-card border-t border-white/20
           transform transition-transform duration-300 ease-in-out
           safe-bottom;
  }
  
  .mobile-bottom-sheet-open {
    @apply translate-y-0;
  }
  
  .mobile-bottom-sheet-closed {
    @apply translate-y-full;
  }
  
  /* Mobile-friendly text */
  .mobile-text-adjust {
    @apply text-base mobile:text-sm;
  }
  
  .mobile-heading {
    @apply text-2xl mobile:text-xl font-bold;
  }
  
  .mobile-subheading {
    @apply text-xl mobile:text-lg font-semibold;
  }
}